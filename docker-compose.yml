version: '3.7'

services:
    web:
        depends_on:
            - db
        image: rs-translations
        build:
            context: .
            dockerfile: Dockerfile
        restart: "no"
        ports:
            - 6000:80
        networks:
            - rstranslations
    db:
        image: mongo:4
        restart: unless-stopped
        volumes:
            - mongo:/data/db
        ports:
            - 27017:27017
        networks:
            - rstranslations
        environment:
            - MONGO_INITDB_DATABASE=rs
            - MONGO_INITDB_ROOT_USERNAME=rstranslations
            - MONGO_INITDB_ROOT_PASSWORD=rstranslations
networks:
    rstranslations:
volumes:
    mongo: